<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head(title=~{::title/text()})">
<title>Build : View all</title>
</head>
<script type="text/javascript">
	function getDirectories(elementId, parentId) {
		$.ajax({
			type : "GET",
			url : "http://localhost:8080/cloudbuild/build/directories",
			data : "parendId=" + parentId,
			success : function(msg) {
				$.each(msg, function(i, directory) {
					//alert("Item #" + i + ": " + directory.id + ": " + directory.name);
					var option = '<option id="' + directory.id + '">' + directory.name + '</option>';
					//alert(option);
					$("#" + elementId).append(option);
					// 缺一不可  
					$("#" + elementId).selectpicker('refresh');
					$("#" + elementId).selectpicker('render');
				});
			}
		});
	}
	$(function() {

		$("#projectName").click(function() {
			getDirectories(null, this.id)
		})

	});
</script>
<body>
	<div class="container">
		<div th:replace="fragments :: cloudbuild-navbar"></div>

		<div class="float-left m-2 col-sm-12 row pl-0 pr-0">
			<div class="col-sm-3 pl-0">
				<div class="form-group">
					<label for="projectName" class="control-label">Product
						Name:</label> <select id="projectName"
						class="form-control selectpicker   form-control  pl-0"  data-live-search="true">
						<option selected="selected">All</option>
					</select>
				</div>

			</div>
			<div class="col-sm-3  ml-0">
				<label>Branch Name:</label><select
					class="selectpicker bootstrap-select  form-control">
					<option>Mustard</option>
					<option>Ketchup</option>
					<option>Relish</option>
				</select>

			</div>
			<div class="col-sm-3">
				<label>Build Type:</label><select
					class="selectpicker show-menu-arrow bootstrap-select  form-control">
					<option>Mustard</option>
					<option>Ketchup</option>
					<option>Relish</option>
				</select>
			</div>
			<div class="col-sm-3 mt-1 float-right">
				<a class="btn btn-primary btn-sm float-right" href="form.html"
					th:href="@{/build}">Search Build</a>
			</div>

		</div>
		<table class="table table-bordered table-striped">
			<thead>
				<tr>
					<th>ID</th>
					<th>Name</th>
					<th>Last Modified</th>
					<th>Size</th>
					<th>Description</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${builds.empty}">
					<td colspan="6">No Build</td>
				</tr>
				<tr th:each="build : ${builds}">
					<td th:text="${build.id}"></td>
					<td th:text="${build.name}"></td>
					<td
						th:text="${#calendars.format(build.modifiedTime,'yyyy-MM-dd HH:mm:ss')}">July
						11, 2012 2:17:16 PM CDT</td>
					<td th:text="${build.size}">Size</td>
					<td th:text="${build.description}">Description</td>
					<td><a th:href="@{/build/download(id=${build.id})}" href="#">Download</a></td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
</html>